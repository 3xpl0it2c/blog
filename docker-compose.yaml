version: "3.7"

services:
  reverse_proxy:
    container_name: "reverse_proxy"
    build: ./Docker/NGINX/NGINX.Dockerfile
    restart: unless-stopped
    ports:
      - "443:443"
      - "80:80"
    depends_on:
      - nodejs
    networks:
        app-network

  nodejs:
    container_name: "nodejs"
    build: ./Docker/Nodejs.Dockerfile
    restart: unless-stopped
    #volumes:
    #  - ./log:/var/log/node_log
    depends_on:
      - redis
      - postgres
    networks:
        app-network

  redis:
    container_name: "redis"
    build: ./Docker/Redis/Redis.Dockerfile
    restart: unless-stopped
    networks:
        app-network

  postgres:
    container_name: "postgres"
    image: postgres
    restart: unless-stopped
    environment:
      - POSTGRES_PASSWORD
    networks:
        app-network

networks:
  app-network:
    driver: bridge
